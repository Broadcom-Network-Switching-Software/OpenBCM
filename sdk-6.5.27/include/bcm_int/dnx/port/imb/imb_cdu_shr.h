
/*
 *         
 * 
 * 
 * This license is set out in https://raw.githubusercontent.com/Broadcom-Network-Switching-Software/OpenBCM/master/Legal/LICENSE file.
 * 
 * Copyright 2007-2022 Broadcom Inc. All rights reserved.
 *     
 * DO NOT EDIT THIS FILE!
 *
 */

#ifndef _IMB_CDU_SHR_H__H_
#define _IMB_CDU_SHR_H__H_

#include <soc/portmod/portmod.h>
#include <bcm/port.h>
#include <bcm/cosq.h>
#include <bcm_int/dnx/port/imb/imb_diag.h>
#include <bcm_int/dnx/cosq/ingress/cosq_ingress_port.h>
#include <soc/dnxc/dnxc_port.h>
/*initialize an IMB.*/
int imb_cdu_shr_init(
    int unit,
    const imb_create_info_t * imb_info,
    imb_specific_create_info_t * imb_specific_info);

/*De-initialize an existing IMB.*/
int imb_cdu_shr_deinit(
    int unit,
    const imb_create_info_t * imb_info,
    imb_specific_create_info_t * imb_specific_info);

/*Add new IMB (Interface Management Block) port*/
int imb_cdu_shr_port_attach(
    int unit,
    bcm_port_t port,
    uint32 flags);

/*Remove an existing IMB (Interface Management Block) port*/
int imb_cdu_shr_port_detach(
    int unit,
    bcm_port_t port);

/*Enable / disable a port*/
int imb_cdu_shr_port_enable_set(
    int unit,
    bcm_port_t port,
    uint32 flags,
    int enable);
int imb_cdu_shr_port_enable_get(
    int unit,
    bcm_port_t port,
    int *enable);

/*Get/set the Start TX threshold.*/
int imb_cdu_shr_port_tx_start_thr_set(
    int unit,
    bcm_port_t port,
    int speed,
    int start_tx_thr);
int imb_cdu_shr_port_tx_start_thr_get(
    int unit,
    bcm_port_t port,
    int *start_tx_thr);

/*Get per record per port the instrumentation counters.*/
int imb_cdu_shr_instru_synced_counters_per_record_get(
    int unit,
    bcm_port_t port,
    int record_index,
    int nof_counters,
    const int *dbal_fields,
    uint64 *counter_values);

/*Reset per port counters for PFC Deadlock detection and PFC instrumentation*/
int imb_cdu_shr_port_instru_pfc_deadlock_counters_reset(
    int unit,
    bcm_port_t port);

/*Initialize Portmod add_info before calling portmod_port_add.*/
int imb_cdu_shr_portmod_add_info_config(
    int unit,
    bcm_port_t port,
    portmod_port_add_info_t * add_info);

#endif /*_IMB_CDU_SHR_H_*/
