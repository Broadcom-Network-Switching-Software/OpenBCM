
/*
 *         
 * 
 * 
 * This license is set out in https://raw.githubusercontent.com/Broadcom-Network-Switching-Software/OpenBCM/master/Legal/LICENSE file.
 * 
 * Copyright 2007-2022 Broadcom Inc. All rights reserved.
 *     
 * DO NOT EDIT THIS FILE!
 *
 */

#ifndef BCM_DNX_SUPPORT
#error "This file is for use by DNX family only!"
#endif /* BCM_DNX_SUPPORT */

#ifndef _FLEXE_DBG_H__H_
#define _FLEXE_DBG_H__H_

#include <soc/portmod/portmod.h>
#include <soc/sand/shrextend/shrextend_debug.h>
/*initialize an FlexE core.*/
shr_error_e flexe_dbg_init(
    int unit);

/*De-initialize an FlexE core.*/
shr_error_e flexe_dbg_deinit(
    int unit);

/* Sync the sw state for WB.*/
shr_error_e flexe_dbg_sync(
    int unit);

/*Add FlexE core ports to FlexE group*/
shr_error_e flexe_dbg_group_phy_add(
    int unit,
    uint32 flags,
    int group_index,
    soc_pbmp_t flexe_core_port_bmp,
    const int *logical_phy_id,
    const flexe_core_port_info_t * port_info);

/*Remove FlexE core ports from FlexE group*/
shr_error_e flexe_dbg_group_phy_remove(
    int unit,
    uint32 flags,
    int group_index,
    soc_pbmp_t flexe_core_port_bmp);

/*Add FlexE client to FlexE group(bus A)*/
shr_error_e flexe_dbg_client_add(
    int unit,
    int client_channel,
    uint32 flags,
    int cal_id,
    const int *flexe_core_port_array,
    bcm_port_flexe_time_slot_t ts_mask,
    int nof_flexe_core_ports);

/*Delete an existing FlexE client (bus A)*/
shr_error_e flexe_dbg_client_delete(
    int unit,
    int client_channel,
    uint32 flags,
    int cal_id,
    const int *flexe_core_port_array,
    bcm_port_flexe_time_slot_t ts_mask,
    int nof_flexe_core_ports);

/*Add a MAC client to bus B*/
shr_error_e flexe_dbg_mac_client_add(
    int unit,
    int client_channel,
    int mgmt_channel,
    uint32 flags,
    int speed);

/*Delete a MAC client from bus B*/
shr_error_e flexe_dbg_mac_client_delete(
    int unit,
    int client_channel,
    int mgmt_channel,
    uint32 flags,
    int speed);

/*Add SAR client to bus C*/
shr_error_e flexe_dbg_sar_client_add(
    int unit,
    int client_channel,
    uint32 flags,
    int speed);

/*Delete SAR client from bus C*/
shr_error_e flexe_dbg_sar_client_delete(
    int unit,
    int client_channel,
    uint32 flags,
    int speed);

/*Allocated time slots in rate adapter*/
shr_error_e flexe_dbg_rateadpt_add(
    int unit,
    int client_channel,
    const flexe_core_rate_adpt_info_t * rate_adpt_info);

/*Delete time slots in rate adapter*/
shr_error_e flexe_dbg_rateadpt_delete(
    int unit,
    int client_channel,
    const flexe_core_rate_adpt_info_t * rate_adpt_info);

/*Map SAR channel to ILKN channel*/
shr_error_e flexe_dbg_sar_channel_map_set(
    int unit,
    uint32 flags,
    const flexe_core_sar_channel_map_info_t * map_info,
    int enable);

/*Add a cross-connect in 66b switch*/
shr_error_e flexe_dbg_66b_switch_set(
    int unit,
    const flexe_core_66bswitch_channel_info_t * src_info,
    const flexe_core_66bswitch_channel_info_t * dest_info,
    int index,
    int enable);

/*Get the 66b switching info*/
shr_error_e flexe_dbg_66b_switch_get(
    int unit,
    const flexe_core_66bswitch_channel_info_t * src_info,
    flexe_core_66bswitch_channel_info_t * dest_info,
    int *nof_dest);

/*Get the 66b switching info from dest info*/
shr_error_e flexe_dbg_66b_switch_reverse_get(
    int unit,
    const flexe_core_66bswitch_channel_info_t * dest_info,
    flexe_core_66bswitch_channel_info_t * src_info,
    int *nof_src);

/*Get/Set FlexE logical PHY ID for FlexE core port*/
shr_error_e flexe_dbg_oh_logical_phy_id_set(
    int unit,
    int flexe_core_port,
    int speed,
    int logical_phy_id);
shr_error_e flexe_dbg_oh_logical_phy_id_get(
    int unit,
    int flexe_core_port,
    int speed,
    uint32 flags,
    int *logical_phy_id);

/*Get/Set FlexE group ID for FlexE core port*/
shr_error_e flexe_dbg_oh_group_id_set(
    int unit,
    int flexe_core_port,
    int group_id);
shr_error_e flexe_dbg_oh_group_id_get(
    int unit,
    int flexe_core_port,
    uint32 flags,
    int *group_id);

/*Get/Set FlexE client IDs for FlexE OH calendar*/
shr_error_e flexe_dbg_oh_client_id_set(
    int unit,
    int cal_id,
    int nof_ports,
    const int *flexe_core_port_array,
    int nof_slots,
    const int *calendar_slots);
shr_error_e flexe_dbg_oh_client_id_get(
    int unit,
    int cal_id,
    uint32 flags,
    int nof_ports,
    const int *flexe_core_port_array,
    int nof_slots,
    int *calendar_slots);

/*Get/Set CR bit for FlexE core port*/
shr_error_e flexe_dbg_oh_cr_bit_set(
    int unit,
    int flexe_core_port,
    int cal_id);
shr_error_e flexe_dbg_oh_cr_bit_get(
    int unit,
    int flexe_core_port,
    uint32 flags,
    int *cal_id);

/*Get/Set CA bit for FlexE core port*/
shr_error_e flexe_dbg_oh_ca_bit_set(
    int unit,
    int flexe_core_port,
    int cal_id);
shr_error_e flexe_dbg_oh_ca_bit_get(
    int unit,
    int flexe_core_port,
    uint32 flags,
    int *cal_id);

/*Get/Set C bit for FlexE core port*/
shr_error_e flexe_dbg_oh_c_bit_set(
    int unit,
    int flexe_core_port,
    int cal_id);
shr_error_e flexe_dbg_oh_c_bit_get(
    int unit,
    int flexe_core_port,
    uint32 flags,
    int *cal_id);

/*Get/Set SC bit for FlexE core port*/
shr_error_e flexe_dbg_oh_sc_bit_set(
    int unit,
    int flexe_core_port,
    int sync_config);
shr_error_e flexe_dbg_oh_sc_bit_get(
    int unit,
    int flexe_core_port,
    uint32 flags,
    int *sync_config);

/*Get/Set active calendar for FlexE core port*/
shr_error_e flexe_dbg_active_calendar_set(
    int unit,
    int flexe_core_port,
    int cal_id);
shr_error_e flexe_dbg_active_calendar_get(
    int unit,
    int flexe_core_port,
    uint32 flags,
    int *cal_id);

/*Get OH alarm status for FlexE core port*/
shr_error_e flexe_dbg_oh_alarm_status_get(
    int unit,
    int flexe_core_port,
    uint16 *alarm_status);

/*Get calendar OH mismatch timeslots for FlexE core port*/
shr_error_e flexe_dbg_oh_cal_mismatch_ts_get(
    int unit,
    int flexe_core_port,
    bcm_port_flexe_time_slot_t * time_slots);

/*Get OAM alarm status for FlexE core port*/
shr_error_e flexe_dbg_oam_alarm_status_get(
    int unit,
    int flexe_core_port,
    uint16 *alarms_status);

/*Set BAS OAM period for FlexE client*/
shr_error_e flexe_dbg_oam_base_period_set(
    int unit,
    int client_channel,
    uint32 flags,
    uint32 base_period);
shr_error_e flexe_dbg_oam_base_period_get(
    int unit,
    int client_channel,
    uint32 flags,
    uint32 *base_period);

/*Enable/disable BAS insertion for FlexE client*/
shr_error_e flexe_dbg_oam_base_insert_enable_set(
    int unit,
    int client_channel,
    uint32 enable);
shr_error_e flexe_dbg_oam_base_insert_enable_get(
    int unit,
    int client_channel,
    uint32 *enable);

/*Enable/disable OAM bypass for FlexE client*/
shr_error_e flexe_dbg_oam_bypass_enable_set(
    int unit,
    int client_channel,
    uint32 flags,
    uint32 enable);
shr_error_e flexe_dbg_oam_bypass_enable_get(
    int unit,
    int client_channel,
    uint32 flags,
    uint32 *enable);

/*Enable/disable OAM bypass for SAR client*/
shr_error_e flexe_dbg_sar_oam_bypass_enable_set(
    int unit,
    int client_channel,
    uint32 flags,
    uint32 enable);
shr_error_e flexe_dbg_sar_oam_bypass_enable_get(
    int unit,
    int client_channel,
    uint32 flags,
    uint32 *enable);

/*Enable/disable OAM local fault insertion for FlexE client*/
shr_error_e flexe_dbg_oam_local_fault_insert_set(
    int unit,
    int client_channel,
    uint32 enable);
shr_error_e flexe_dbg_oam_local_fault_insert_get(
    int unit,
    int client_channel,
    uint32 *enable);

/*Enable/disable OAM remote fault insertion for FlexE client*/
shr_error_e flexe_dbg_oam_remote_fault_insert_set(
    int unit,
    int client_channel,
    uint32 enable);
shr_error_e flexe_dbg_oam_remote_fault_insert_get(
    int unit,
    int client_channel,
    uint32 *enable);

/*Enable/disable OAM RDI insertion for FlexE client*/
shr_error_e flexe_dbg_oam_rdi_insert_set(
    int unit,
    int client_channel,
    uint32 enable);
shr_error_e flexe_dbg_oam_rdi_insert_get(
    int unit,
    int client_channel,
    uint32 *enable);

/*Configure SD alarm block number for FlexE client*/
shr_error_e flexe_dbg_oam_sd_alm_block_num_set(
    int unit,
    int client_channel,
    uint32 block_num);
shr_error_e flexe_dbg_oam_sd_alm_block_num_get(
    int unit,
    int client_channel,
    uint32 *block_num);

/*Configure SD BIP8 error set threshold for FlexE client*/
shr_error_e flexe_dbg_oam_sd_alm_trigger_thr_set(
    int unit,
    int client_channel,
    uint32 threshold);
shr_error_e flexe_dbg_oam_sd_alm_trigger_thr_get(
    int unit,
    int client_channel,
    uint32 *threshold);

/*Configure SD BIP8 error clear threshold for FlexE client*/
shr_error_e flexe_dbg_oam_sd_alm_clear_thr_set(
    int unit,
    int client_channel,
    uint32 threshold);
shr_error_e flexe_dbg_oam_sd_alm_clear_thr_get(
    int unit,
    int client_channel,
    uint32 *threshold);

/*Configure SF bip8 alarm block number for FlexE client*/
shr_error_e flexe_dbg_oam_sf_bip8_alm_block_num_set(
    int unit,
    int client_channel,
    uint32 block_num);
shr_error_e flexe_dbg_oam_sf_bip8_alm_block_num_get(
    int unit,
    int client_channel,
    uint32 *block_num);

/*Configure SF BIP8 error set threshold for FlexE client*/
shr_error_e flexe_dbg_oam_sf_bip8_alm_trigger_thr_set(
    int unit,
    int client_channel,
    uint32 threshold);
shr_error_e flexe_dbg_oam_sf_bip8_alm_trigger_thr_get(
    int unit,
    int client_channel,
    uint32 *threshold);

/*Configure SF BIP8 error clear threshold for FlexE client*/
shr_error_e flexe_dbg_oam_sf_bip8_alm_clear_thr_set(
    int unit,
    int client_channel,
    uint32 threshold);
shr_error_e flexe_dbg_oam_sf_bip8_alm_clear_thr_get(
    int unit,
    int client_channel,
    uint32 *threshold);

/*Configure SD BEI alarm block number for FlexE client*/
shr_error_e flexe_dbg_oam_sd_bei_alm_block_num_set(
    int unit,
    int client_channel,
    uint32 block_num);
shr_error_e flexe_dbg_oam_sd_bei_alm_block_num_get(
    int unit,
    int client_channel,
    uint32 *block_num);

/*Configure SD BEI error set threshold for FlexE client*/
shr_error_e flexe_dbg_oam_sd_bei_alm_trigger_thr_set(
    int unit,
    int client_channel,
    uint32 threshold);
shr_error_e flexe_dbg_oam_sd_bei_alm_trigger_thr_get(
    int unit,
    int client_channel,
    uint32 *threshold);

/*Configure SD BEI error clear threshold for FlexE client*/
shr_error_e flexe_dbg_oam_sd_bei_alm_clear_thr_set(
    int unit,
    int client_channel,
    uint32 threshold);
shr_error_e flexe_dbg_oam_sd_bei_alm_clear_thr_get(
    int unit,
    int client_channel,
    uint32 *threshold);

/*Configure SF BEI alarm block number for FlexE client*/
shr_error_e flexe_dbg_oam_sf_bei_alm_block_num_set(
    int unit,
    int client_channel,
    uint32 block_num);
shr_error_e flexe_dbg_oam_sf_bei_alm_block_num_get(
    int unit,
    int client_channel,
    uint32 *block_num);

/*Configure SF BEI error set threshold for FlexE client*/
shr_error_e flexe_dbg_oam_sf_bei_alm_trigger_thr_set(
    int unit,
    int client_channel,
    uint32 threshold);
shr_error_e flexe_dbg_oam_sf_bei_alm_trigger_thr_get(
    int unit,
    int client_channel,
    uint32 *threshold);

/*Configure SF BEI error clear threshold for FlexE client*/
shr_error_e flexe_dbg_oam_sf_bei_alm_clear_thr_set(
    int unit,
    int client_channel,
    uint32 threshold);
shr_error_e flexe_dbg_oam_sf_bei_alm_clear_thr_get(
    int unit,
    int client_channel,
    uint32 *threshold);

/*Get OAM BIP8 counter for FlexE client*/
shr_error_e flexe_dbg_oam_bip8_counter_get(
    int unit,
    int client_channel,
    uint64 *val);

/*Get OAM BEI counter for FlexE client*/
shr_error_e flexe_dbg_oam_bei_counter_get(
    int unit,
    int client_channel,
    uint64 *val);

/*Get OAM packet counter for FlexE client*/
shr_error_e flexe_dbg_oam_pkt_count_get(
    int unit,
    int client_channel,
    uint64 *val);

/*Get OAM BAS packet counter for FlexE client*/
shr_error_e flexe_dbg_oam_base_pkt_count_get(
    int unit,
    int client_channel,
    uint64 *val);

/*Configure default FlexE phy settings*/
shr_error_e flexe_dbg_phy_default_config_set(
    int unit,
    int flexe_core_port,
    int local_port,
    int speed,
    int enable);

/*Configure FlexE OAM alarm collection timer step*/
shr_error_e flexe_dbg_oam_alarm_collection_timer_step_set(
    int unit,
    int step);
shr_error_e flexe_dbg_oam_alarm_collection_timer_step_get(
    int unit,
    int *step);

/*Number of steps for OAM alarm collection period*/
shr_error_e flexe_dbg_oam_alarm_collection_step_count_set(
    int unit,
    int step_count);
shr_error_e flexe_dbg_oam_alarm_collection_step_count_get(
    int unit,
    int *step_count);

/*Configure/get SAR cell mode in FlexE core*/
shr_error_e flexe_dbg_sar_cell_mode_set(
    int unit,
    int cell_mode);
shr_error_e flexe_dbg_sar_cell_mode_get(
    int unit,
    int *cell_mode);

/*Set the busa channel map in FlexE Core*/
shr_error_e flexe_dbg_busa_channel_map_set(
    int unit,
    uint32 flags,
    const flexe_core_busa_channel_map_info_t * channel_map_info,
    int enable);

/*The local fault status for FlexE client*/
shr_error_e flexe_dbg_client_local_fault_get(
    int unit,
    int client_channel,
    int *local_fault_status);

/*The Remote fault status for FlexE client*/
shr_error_e flexe_dbg_client_remote_fault_get(
    int unit,
    int client_channel,
    int *remote_fault_status);

/*The local fault status for FlexE SAR client*/
shr_error_e flexe_dbg_sar_client_local_fault_get(
    int unit,
    int client_channel,
    int *local_fault_status);

/*The Remote fault status for FlexE SAR client*/
shr_error_e flexe_dbg_sar_client_remote_fault_get(
    int unit,
    int client_channel,
    int *remote_fault_status);

/*Set/get Flexe 1588 packet header*/
shr_error_e flexe_dbg_1588_pkt_header_set(
    int unit,
    uint32 flags,
    uint32 val);
shr_error_e flexe_dbg_1588_pkt_header_get(
    int unit,
    uint32 flags,
    uint32 *val);

/*Set/get Flexe oh/oam packet mac*/
shr_error_e flexe_dbg_oh_oam_pkt_mac_set(
    int unit,
    uint32 flags,
    uint32 val);
shr_error_e flexe_dbg_oh_oam_pkt_mac_get(
    int unit,
    uint32 flags,
    uint32 *val);

/*Enable/disable FlexE BAS OAM to external processor*/
shr_error_e flexe_dbg_bas_oam_to_ext_processor_set(
    int unit,
    int enable);
shr_error_e flexe_dbg_bas_oam_to_ext_processor_get(
    int unit,
    int *enable);

/*Get 1588 2-step tx timestamp for FlexE phy*/
shr_error_e flexe_dbg_ptp_2step_tx_info_get(
    int unit,
    int flexe_core_port,
    uint32 *valid,
    uint64 *timestamp);

/*Set/get level for SAR jitter fifo*/
shr_error_e flexe_dbg_sar_jitter_fifo_level_set(
    int unit,
    int client_channel,
    const flexe_core_sar_jitter_fifo_level_t * fifo_level);
shr_error_e flexe_dbg_sar_jitter_fifo_level_get(
    int unit,
    int client_channel,
    flexe_core_sar_jitter_fifo_level_t * fifo_level);

/*Enable or disbale OAM BAS BIP recalculation*/
shr_error_e flexe_dbg_oam_bas_bip_recal_enable_set(
    int unit,
    int val);
shr_error_e flexe_dbg_oam_bas_bip_recal_enable_get(
    int unit,
    int *val);

/*Configure if FlexE oam bas period mismatch trigger los alarm*/
shr_error_e flexe_dbg_oam_bas_period_mismatch_trigger_los_alarm_set(
    int unit,
    int val);
shr_error_e flexe_dbg_oam_bas_period_mismatch_trigger_los_alarm_get(
    int unit,
    int *val);

/*Configure if inserting LF under flexe group deskew alarm*/
shr_error_e flexe_dbg_deskew_alarm_trigger_lf_set(
    int unit,
    int group_index,
    int val);
shr_error_e flexe_dbg_deskew_alarm_trigger_lf_get(
    int unit,
    int group_index,
    int *val);

/*enable/disable SAR client*/
shr_error_e flexe_dbg_sar_enable_set(
    int unit,
    int client_channel,
    uint32 flags,
    int enable);
shr_error_e flexe_dbg_sar_enable_get(
    int unit,
    int client_channel,
    uint32 flags,
    int *enable);

#endif /*_FLEXE_DBG_H_*/
