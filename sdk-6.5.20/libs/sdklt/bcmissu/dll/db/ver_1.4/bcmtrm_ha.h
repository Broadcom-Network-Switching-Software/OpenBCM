/**************************************************************************
 *
 * DO NOT EDIT THIS FILE!
 * This file is auto-generated by HA parser from YAML formated file.
 * Edits to this file will be lost when it is regenerated.
 * Tool: bcmha/scripts/ha_yml_parser.py
 *
 * $Copyright:.$
 *
 **************************************************************************/
#ifndef BCMTRM_HA_H
#define BCMTRM_HA_H

#include <shr/shr_ha.h>

#define BCMTRM_MAX_COMMITTED_TRANS 32
#define BCMTRM_STATE_NONE 0
#define BCMTRM_STATE_STAGING 1
#define BCMTRM_STATE_COMMITTED 2

/*!
 * Maintains the state of a transaction for the model path
 */
typedef struct {
   /*! The transaction ID */
   uint32_t trn_id;
   /*! The state of the transaction (staging or committed) */
   uint32_t state;
} trn_state_t;

#define TRN_STATE_T_ID 0x41d4cd8c7a8decea

/*!
 * Maintain an array of all the active transactions
 */
typedef struct {
   /*! Identify if structure is coherent */
   uint32_t signature;
   /*! The index of the first transaction */
   uint8_t start_idx;
   /*! The index of the last transaction */
   uint8_t last_idx;
   /*! Count the number of occupied entries */
   uint8_t entry_cnt;
   /*! Array of committed transactions state */
   trn_state_t trn_state[BCMTRM_MAX_COMMITTED_TRANS];
} trn_info_t;

#define TRN_INFO_T_ID 0x40a68a57133e2ea9

/*!
 * Information required for each field in an entry of interactive table
 */
typedef struct {
   /*! Field ID */
   uint32_t fid;
   /*! Index when part of an array */
   uint32_t idx;
   /*! The value of the field */
   uint64_t data;
} trn_interact_field_t;

#define TRN_INTERACT_FIELD_T_ID 0xd79d42afce7b3338

/*!
 * Maintains the state of a transaction for the interactive path
 */
typedef struct {
   /*! Identify if structure is coherent */
   uint32_t signature;
   /*! The maximal number of fields in the array */
   uint16_t max_fields;
   /*! The actual number of valid fields */
   uint16_t field_count;
   /*! The transaction ID associated with this operation */
   uint32_t trn_id;
   /*! Indicates if the entry is PT or not */
   bool pt;
   /*! The operation code associated with the entry */
   uint32_t opcode;
   /*! The table ID associated with this entry */
   uint32_t tbl_id;
   /*! Array of fields with max_fields elements */
   trn_interact_field_t field_arry[];
} trn_interact_info_t;

#define TRN_INTERACT_INFO_T_ID 0x46f4a259741b11d3

#endif /* BCMTRM_HA_H */
